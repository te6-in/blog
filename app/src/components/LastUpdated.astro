---
import type { HTMLAttributes } from "astro/types";
import { keyBy, mapValues } from "es-toolkit";

interface Props extends HTMLAttributes<"div"> {}

const builtDate = new Date();

const formatter = Intl.DateTimeFormat("ko-KR", {
  year: "numeric",
  month: "2-digit",
  day: "2-digit",
  hour: "2-digit",
  minute: "2-digit",
  second: "2-digit",
  hour12: false,
  timeZoneName: "short",
});

const { year, month, day, hour, minute, second, timeZoneName } = mapValues(
  keyBy(formatter.formatToParts(builtDate), (part) => part.type),
  (part) => part.value,
);

// iso with timezone
const formattedDate = `${year}-${month}-${day}T${hour}:${minute}:${second}${timeZoneName}`;
---
<div {...Astro.props}>마지막 업데이트: {formattedDate}</div>
