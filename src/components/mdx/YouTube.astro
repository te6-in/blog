---
import { YouTube as YouTubeEmbed } from "astro-embed";
import type { ComponentProps } from "astro/types";

interface Props
  extends Omit<
    ComponentProps<typeof YouTubeEmbed>,
    "posterQuality" | "playlabel" | "params"
  > {
  startsAt?: number;
  endsAt?: number;
  isShorts?: boolean;
}

const { startsAt, endsAt, isShorts, ...props } = Astro.props;

const params = new URLSearchParams({
  ...(startsAt && { start: `${startsAt}` }),
  ...(endsAt && { end: `${endsAt}` }),
}).toString();
---

<YouTubeEmbed
  {...props}
  params={params}
  posterQuality="max"
  playlabel="재생"
  class:list={[
    "rounded-mdx-block max-h-[80vh] sidebar-shown:max-h-[60vh] mx-auto aspect-video",
    isShorts && "aspect-[9/16]",
  ]}
/>
