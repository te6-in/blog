---
import { YouTube as YouTubeEmbed } from "astro-embed";
import type { ComponentProps } from "astro/types";

interface Props
  extends Omit<
    ComponentProps<typeof YouTubeEmbed>,
    "posterQuality" | "playlabel" | "params"
  > {
  startsAt?: number;
  endsAt?: number;
  isShorts?: boolean;
}

const { startsAt, endsAt, isShorts, ...props } = Astro.props;

const params = new URLSearchParams({
  ...(startsAt && { start: `${startsAt}` }),
  ...(endsAt && { end: `${endsAt}` }),
}).toString();
---

<YouTubeEmbed
  {...props}
  params={params}
  posterQuality="max"
  playlabel="재생"
  class:list={[
    "rounded-lg", // TODO: image에도 동일한 radius 적용해야 하므로 variable로 빼기
    { "aspect-[9/16] h-96": isShorts },
  ]}
/>
