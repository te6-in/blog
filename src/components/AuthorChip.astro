---
import { match } from "ts-pattern";
import { Image } from "astro:assets";

interface Props {
  variant?: "flat" | "glass";
  name: string;
  id: string;
  avatar: string;
  url: string;
}

const { variant = "flat", id, avatar, name, url } = Astro.props;

const classNames = match(variant)
  .with("flat", () => ({
    base: "engaged:bg-neutral-100 text-neutral-700 engaged:text-neutral-800",
    image: "bg-neutral-200",
  }))
  .with("glass", () => ({
    base: "engaged:border-neutral-500/30 engaged:bg-neutral-300/30 engaged:backdrop-blur engaged:shadow text-white/80 engaged:text-white",
    image: "bg-neutral-200/75 backdrop-blur",
  }))
  .exhaustive();
---

<address>
  <a
    class:list={[
      "inline-flex items-center gap-2 text-sm transition-all p-2 pe-3.5 not-italic rounded-full -m-2 border border-transparent group",
      classNames.base,
    ]}
    href={url}
    target="_blank"
    rel="noopener noreferrer"
  >
    <Image
      src={avatar}
      alt={``}
      width={28}
      height={28}
      class:list={["rounded-full motion-safe:animate-pulse", classNames.image]}
      onload="this.classList.remove('motion-safe:animate-pulse')"
    />
    <span>
      <span>
        {name}
      </span>
      <span class="text-xs font-medium text-current/50">
        {id}
      </span>
    </span>
  </a>
</address>
