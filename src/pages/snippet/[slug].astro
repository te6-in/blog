---
import { getCollection, render } from "astro:content";
import { BaselineStatus } from "astro-embed";
import ImageWithInferredAlt from "../../components/ImageWithInferredAlt.astro";
import Prose from "../../components/Prose.astro";
import AnchorWithLinkPreviewTooltip from "../../components/mdx/AnchorWithLinkPreviewTooltip";
import Bluesky from "../../components/mdx/Bluesky.astro";
import Callout from "../../components/mdx/Callout.astro";
import Foo from "../../components/mdx/Foo.astro";
import Hr from "../../components/mdx/Hr.astro";
import LinkPreviewCard from "../../components/mdx/LinkPreviewCard";
import Twitter from "../../components/mdx/Twitter.astro";
import YouTube from "../../components/mdx/YouTube.astro";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const posts = await getCollection("snippet");

  return posts.map((post) => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Layout>
  <Prose>
    <Content
      components={{
        Callout,
        LinkPreviewCard,
        AppleMusic: Foo,
        Twitter,
        YouTube,
        Bluesky,
        BaselineStatus,
        ImageGrid: Foo,
        img: ImageWithInferredAlt,
        a: AnchorWithLinkPreviewTooltip,
        hr: Hr,
      }}
    />
  </Prose>
</Layout>
